---
layout: post
title: "写自己的 Spring-Boot（二）：容器"
category: blog
tags: [Spring, framework, Java]
date: 2019-03-02 08:00:06 +0800
comments: true
hidden: true
---

## 续言
---
上篇文章中我们把框架的功能和结构都预定好了，从本篇开始逐步添加功能点，使它迅速丰满起来。

实现过程呢，就顺从敏捷开发思想的引导，首先使框架能 Run 起来，再通过快速迭代、小步快跑地优化。框架是没法独立运行起来的，还需要搭配上工程实现业务逻辑才行。所以，我们向项目内添加一个同级模块使用 winter 框架，这也算是 TDD 测试驱动开发的另一种表现形式了。

当然了，开始阶段只有一个入口类，项目也只依赖框架。

## 服务器
---
我们知道，一个 HTTP 请求被发送到服务器时，都是二进制的字节流，是操作系统的 TCP/IP 栈把这些字节流解析成带有 IP 和端口的 TCP 请求，然后将请求分配给对应的进程来处理。能够受理外部请求的进程我们暂时把它称作 socket 服务进程，每个服务进程都监听着一个服务器端口，操作系统就是根据这个端口来对应每个外部请求和服务进程的。

服务进程的编写就要涉及到 Java 的 sockets 编程了，对 HTTP 请求的处理和封装非常繁杂，涉及到的 CGI 编程也不应该是我们要涉及的范围，引用现成的服务器组件就是我们最好的选择了。

#### Tomcat
Tomcat 应该是 Java 开发工程师接触最多的服务器了。它是由 Java 语言编写，运行在 JVM 上的，对 Java 开发者来说很亲切。背靠 Java 和 Apache 的大腿，又有 Spring 的默认支持，市场占有率一直居高不下，当然了，高性能和对各种 I/O 模型的支持才是它成功的关键。

我们并不需要使用它的高级功能，多路复用 + 默认的单实例多线程即可。

Tomcat 从 7 开始支持嵌入式功能，我们在框架内直接实例化 `org.apache.catalina.startup.Tomcat` 类，再调用其 `start()` 方法即可启动一个 Tomcat 线程，默认监听 8080 端口，开始接受操作系统分配的 CGI 请求。

## Servlet
---



#### 标准

#### 容器


## Dispatcher
---


## 实例
---

























































































