---
layout: post
title: "Java 线程"
category: blog
tags: [Java, Thread]
date: 2019-04-20 08:00:06 +0800
comments: true
---

## 前言
---
最近重读《深入理解 Java 虚拟机》，第一次读是在我刚接触 Java 时，仅凭着对 JVM 的一知半解把这本书大概看了一遍，囫囵吞枣似的，只对 Java 的虚拟机有了简单的认识，相当于在脑海里搭建了虚拟机知识的骨架。之后的工作中，也不断地接触虚拟机相关的知识，虽然不成系统，也向这副"骨架"中填充了不少"血肉"。如今重读，更是想温故而知新，将一些之前没注意到的知识点补全。

当然本文不是一篇读后感，而是对书里某一小节疑问的探究过程，只是觉得有些意思，可能对了解 Java 线程本质有所帮助，所以整理总结一下。

{{ site.article.copyright }}

## 疑问
---
#### 内存溢出
我们知道，JVM 里内存被分为堆区、栈区、方法和常量区以及程序计数器。书中第二章，作者为了将各个区的内存分配策略及其内存泄漏的可能性讲清楚，添加了几个例子，在各区分配大量内存，依次在堆区、方法和常量区制造了人为的内存溢出。

在 JVM 启动参数中限制了 JVM 内存大小后，我们可以很简单地使它们内存溢出：
- 以 `-Xmx20M` 限制最大堆内存大小后，在方法内不停分配无法被回收的对象导致堆区内存溢出。
- 以 `-Xss160K` 限制栈最大内存后，可以通过制造一个死循环递归让栈溢出。
- 使用 `intern()` 语句大量分配常量使常量区溢出。

#### 栈区内存溢出
其中使用

## 小结
---

{{ site.article.summary }}
